(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{599:function(a,t,s){"use strict";s.r(t);var e=s(7),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"学习spring-cloud过程中的问题记录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#学习spring-cloud过程中的问题记录"}},[a._v("#")]),a._v(" 学习spring cloud过程中的问题记录")]),a._v(" "),t("p",[a._v("这里记录了我学习spring cloud的过程中，遇到的一些错误，以及一些已经忘记的知识点")]),a._v(" "),t("h2",{attrs:{id:"mybatis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mybatis"}},[a._v("#")]),a._v(" mybatis")]),a._v(" "),t("h3",{attrs:{id:"usegeneratedkeys"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usegeneratedkeys"}},[a._v("#")]),a._v(" useGeneratedKeys")]),a._v(" "),t("p",[a._v("根据官方的解释")]),a._v(" "),t("blockquote",[t("p",[a._v("允许JDBC支持自动生成主键，需要数据库驱动支持。如果设置为 true，将强制使用自动生成主键。尽管一些数据库驱动不支持此特性，但仍可正常工作（如 Derby）")])]),a._v(" "),t("p",[a._v("我们可以在三个地方设置该参数")]),a._v(" "),t("ul",[t("li",[a._v("在 "),t("code",[a._v("settings")]),a._v(" 元素中设置 "),t("strong",[a._v("useGeneratedKeys")]),a._v(" 参数")]),a._v(" "),t("li",[a._v("在 "),t("code",[a._v("xml")]),a._v(" 映射器中设置 "),t("strong",[a._v("useGeneratedKeys")]),a._v(" 参数")]),a._v(" "),t("li",[a._v("在 "),t("code",[a._v("接口")]),a._v(" 映射器中设置 "),t("strong",[a._v("useGeneratedKeys")]),a._v(" 参数")])]),a._v(" "),t("p",[a._v("详细可以看此篇"),t("a",{attrs:{href:"https://blog.nowcoder.net/n/efa0db7ba0ba48fab13e7a6209a0c12d?from=nowcoder_improve",target:"_blank",rel:"noopener noreferrer"}},[a._v("博客"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("这个参数的作用就是，比如我们执行"),t("code",[a._v("insert")]),a._v("操作，那么我们能够拿到数据库自动生成的主键id")]),a._v(" "),t("p",[t("code",[a._v("keyProperty")]),a._v("参数是和"),t("code",[a._v("useGeneratedKeys")]),a._v("一起使用的，除了这个，还有"),t("code",[a._v("keyColumn")]),a._v("，他们的区别是")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("keyColumn")]),a._v(" 数据库 列名（or 别名）")]),a._v(" "),t("li",[t("code",[a._v("keyProperty")]),a._v(" java 中要封装的 类的参数名")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://picture.xcye.xyz/image-20220115194704947.png",alt:""}})]),a._v(" "),t("h3",{attrs:{id:"resultmap标签"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resultmap标签"}},[a._v("#")]),a._v(" resultMap标签")]),a._v(" "),t("p",[a._v("详细请看mybatis的"),t("a",{attrs:{href:"../../mybatis/readme#resultMap"}},[a._v("笔记")])]),a._v(" "),t("h2",{attrs:{id:"spring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring"}},[a._v("#")]),a._v(" spring")]),a._v(" "),t("h3",{attrs:{id:"service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#service"}},[a._v("#")]),a._v(" service")]),a._v(" "),t("p",[a._v("当我们在service的实现类上，注入dao的对象的时候，可以使用spring的"),t("code",[a._v("Autowired")]),a._v("，我们也可以使用java自带的"),t("code",[a._v("Resource")]),a._v("进行依赖注入")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Resource")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PaymentDao")]),a._v(" paymentDao"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h3",{attrs:{id:"使用resttemplate传递数据-收不到"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用resttemplate传递数据-收不到"}},[a._v("#")]),a._v(" 使用restTemplate传递数据，收不到")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CommonResult")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Payment")]),a._v(" payment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("最初是这样的，我们从另一个服务中，使用"),t("code",[a._v("restTemplate")]),a._v("的方法请求该controller的时候，会发现payment中的数据，没有")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("restTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("postForObject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("serviceUrl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getPaymentUrl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/payment/create"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("payment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CommonResult")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://picture.xcye.xyz/image-20220115221158286.png",alt:""}})]),a._v(" "),t("p",[a._v("出现这个原因，是需要我们使用"),t("code",[a._v("@RequestBody")]),a._v("这个注解")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CommonResult")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@RequestBody")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Payment")]),a._v(" payment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("blockquote",[t("p",[t("code",[a._v("@RequestBody")]),a._v("主要用来接收前端传递给后端的"),t("code",[a._v("json字符串")]),a._v("中的数据的(请求体中的数据的)；")]),a._v(" "),t("p",[a._v("这里应该是"),t("code",[a._v("postForObject")]),a._v("方法传递过去的是一个json字符串，所以就导致收不到数据")])]),a._v(" "),t("h3",{attrs:{id:"value注解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#value注解"}},[a._v("#")]),a._v(" @Value注解")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/99272510",target:"_blank",rel:"noopener noreferrer"}},[a._v("SpringBoot之Spring@Value属性注入使用详解 - 知乎 (zhihu.com)"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("该注解，可以通过"),t("code",[a._v("key")]),a._v("获取到"),t("code",[a._v("application.yml")]),a._v("中的配置项值")]),a._v(" "),t("p",[a._v("使用")]),a._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8001")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"${server.port}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" serverPort"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("使用的时候，一定要通过"),t("code",[a._v("${}")]),a._v("去获取")]),a._v(" "),t("h2",{attrs:{id:"maven"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#maven"}},[a._v("#")]),a._v(" maven")]),a._v(" "),t("h3",{attrs:{id:"解决jdk版本一直改变"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决jdk版本一直改变"}},[a._v("#")]),a._v(" 解决jdk版本一直改变")]),a._v(" "),t("p",[a._v("增加下面这个插件")]),a._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("plugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("org.apache.maven.plugins"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("maven-compiler-plugin"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("3.8.1"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("configuration")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("1.8"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("target")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("1.8"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("target")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("configuration")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("plugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("h2",{attrs:{id:"cloud"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cloud"}},[a._v("#")]),a._v(" cloud")]),a._v(" "),t("h3",{attrs:{id:"no-instances-available-for-cloud-payment-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#no-instances-available-for-cloud-payment-service"}},[a._v("#")]),a._v(" No instances available for CLOUD-PAYMENT-SERVICE")]),a._v(" "),t("p",[a._v("如果搭建集群的时候，请求报这个错误，那么大概率是"),t("code",[a._v("spring.application.name")]),a._v("为"),t("code",[a._v("CLOUD-PAYMENT-SERVICE")]),a._v("的服务提供者，没有被注册到注册中心")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://picture.xcye.xyz/image-20220116220155126.png",alt:""}})]),a._v(" "),t("blockquote",[t("p",[a._v("一定要保证，此"),t("code",[a._v("CLOUD-PAYMENT-SERVICE")]),a._v("在上图箭头处")])])])}),[],!1,null,null,null);t.default=n.exports}}]);